{"version":3,"sources":["../src/modal.js"],"names":["init","require","$","ModalFactory","ModalEvents","ajax","notification","trigger","create","type","types","SAVE_CANCEL","title","body","done","modal","getRoot","on","save","e","preventDefault","usernameid","document","getElementById","value","toString","promises","call","methodname","args","field","values","data","createPerson","fail","exception","userRow","newPerson","lastaccess","country","username","lastname","firstname","email","suspended","firstaccess","city","newPersonAttribute","Date","firstChild","removeChild","i","length","createElement","innerHTML","forEach","x","appendChild"],"mappings":"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","sourcesContent":["export const init = () => {\n\n    require([\"jquery\", \"core/modal_factory\", 'core/modal_events', 'core/ajax', 'core/notification'],\n        function($, ModalFactory, ModalEvents, ajax, notification) {\n            let trigger = $('#create-modal');\n\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: \"Informaci√≥n sobre usuarios\", // Your modal title.\n                body: '<form>\\n' +\n                    '    <label>Ingresa el nombre del usuario\\n' +\n                    '        <input id=\"username-input\" name=\"user\" type=\"text\">\\n' +\n                    '    </label>\\n' +\n                    '</form>',\n            }, trigger)\n                .done(function(modal) {\n\n                    modal.getRoot().on(ModalEvents.save, function(e) {\n                        e.preventDefault();\n                        // Console.log(Object.values(modal.getRoot()));\n                        let usernameid = [];\n                        usernameid.push(document.getElementById('username-input').value.toString());\n\n\n                        let promises = ajax.call([{\n                            methodname: 'core_user_get_users_by_field',\n                            args: {field: 'username', values: usernameid}\n                        }]);\n                        promises[0].done(function(data) {\n\n                            // Console.log(data[0]);\n                            createPerson(data[0]);\n                        }).fail(\n                            function(e) {\n                                notification.exception(e);\n                            }\n                        );\n                    }).fail(notification.exception);\n\n\n                });\n        });\n\n\n};\n\n// eslint-disable-next-line valid-jsdoc,require-jsdoc\nfunction createPerson(data) {\n\n    let userRow = document.getElementById(\"user-row\");\n    let newPerson = [];\n    const {lastaccess, country, username, lastname, firstname, email, suspended, firstaccess, city} = data;\n\n\n    const newPersonAttribute = [username, firstname, lastname, email,\n        `${country} - ${city}`, new Date(firstaccess * 1000), new Date(lastaccess * 1000), suspended];\n\n    while (userRow.firstChild) {\n        userRow.removeChild(userRow.firstChild);\n    }\n\n    /* If (userRow.firstChild) {\n        userRow.parentElement.appendChild(document.createElement('tr'));\n    }*/\n\n    for (let i = 0; i < newPersonAttribute.length; i++) {\n        newPerson[i] = document.createElement('td');\n        newPerson[i].innerHTML = newPersonAttribute[i];\n    }\n\n\n    newPerson.forEach(x => userRow.appendChild(x));\n}\n"],"file":"modal.min.js"}